<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>4 Horsemen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- HUD (player frame) -->
  <div class="hud-root" id="hud-root">
    <div class="hud-header">
      <div id="hud-name">Player</div>
      <div id="hud-level">Lv 60</div>
    </div>

    <div class="hud-bars">
      <!-- Health -->
      <div class="bar-row">
        <div class="bar-label">
          <span>HP</span>
          <span id="hp-text">100 / 100</span>
        </div>
        <div class="bar-track">
          <div id="hp-fill"></div>
          <div class="bar-text-overlay" id="hp-text-overlay">100 / 100</div>
        </div>
      </div>

      <!-- Power / Energy / Mana -->
      <div class="bar-row">
        <div class="bar-label">
          <span>Power</span>
          <span id="power-text">100 / 100</span>
        </div>
        <div class="bar-track">
          <div id="power-fill"></div>
          <div class="bar-text-overlay" id="power-text-overlay">100 / 100</div>
        </div>
      </div>
    </div>
  </div>

  <div class="hud-root enemy-hud" id="target-hud-root">
    <div class="hud-header">
      <div id="target-hud-name">Target</div>
      <div id="target-hud-level">Lv ??</div>
    </div>

    <div class="hud-bars">
      <!-- Health -->
      <div class="bar-row">
        <div class="bar-label">
          <span>HP</span>
          <span id="target-hp-text">0 / 0</span>
        </div>
        <div class="bar-track">
          <div id="target-hp-fill"></div>
          <div class="bar-text-overlay" id="target-hp-text-overlay">0 / 0</div>
        </div>
      </div>

      <!-- Power -->
      <div class="bar-row">
        <div class="bar-label">
          <span>Power</span>
          <span id="target-power-text">0 / 0</span>
        </div>
        <div class="bar-track">
          <div id="target-power-fill"></div>
          <div class="bar-text-overlay" id="target-power-text-overlay">0 / 0</div>
        </div>
      </div>
    </div>
  </div>

 <!-- <div class="boss-hud-column" id="boss-hud-column">
     JS will inject 4 mini-huds here 
  </div>
-->
  <!-- Ability bar (bottom center) -->
  <div class="ability-bar-root" id="ability-bar-root">
    <!-- JS will fill this with 3 slots -->
  </div>
  <!-- Debuff stacks / timers -->
  <div class="debuff-container" id="debuff-container">
    <!-- JS will populate rows, example shape:
      <div class="debuff-row" data-id="plague">
        <div class="debuff-color-box" style="background:#00ff00"></div>
        <div class="debuff-info">
          <span class="debuff-stacks">5x</span>
          <span class="debuff-timer">24s</span>
        </div>
      </div>
    -->
  </div>

  <!-- Game Over overlay -->
  <div class="gameover-overlay overlay" id="gameover-overlay">
    <div class="gameover-title">Game Over</div>
    <div class="gameover-desc">You succumbed to the Horsemen.</div>
    <button class="restart-btn" id="restart-btn">Restart</button>
  </div>

  <!-- Victory overlay (stub for future win condition) -->
  <div class="victory-overlay overlay" id="victory-overlay">
    <div class="gameover-title">Victory</div>
    <div class="gameover-desc">You survived the Horsemen.</div>
    <button class="restart-btn" id="restart-btn-victory">Restart</button>
  </div>

  <!-- ========================= -->
  <!--  Script includes (order!) -->
  <!-- ========================= -->

  <!-- 1. Three.js -->
  <script src="three.js"></script>

  <!-- 2. Constants / config -->
  <script src="js/constants.js"></script>

  <!-- 3. Core game state / data model -->
  <script src="js/core/GameState.js"></script>
  <script src="js/core/Unit.js"></script>
  <script src="js/core/AbilityDefs.js"></script>
  <script src="js/core/PlayerLoadout.js"></script>

  <!-- 4. UI layer -->
  <script src="js/ui/hud.js"></script>
  <script src="js/ui/overlays.js"></script>
  <script src="js/ui/debuffUI.js"></script>
  <script src="js/ui/WorldBar.js"></script>
  <script src="js/ui/AbilityBar.js"></script>

  <!-- 5. Scene builders -->
  <script src="js/scene/ArenaFloor.js"></script>
  <script src="js/scene/ArenaWalls.js"></script>
  <script src="js/scene/ArenaPlatform.js"></script>
  <script src="js/scene/ArenaPillars.js"></script>
  <script src="js/scene/Arena.js"></script>
  <script src="js/scene/PlayerBall.js"></script>
  <script src="js/scene/HorsemenGroup.js"></script>
  <script src="js/entities/Horseman.js"></script>
  <script src="js/entities/SkullCluster.js"></script>

  <!-- 6. Systems (runtime logic updated each frame) -->
  <script src="js/systems/PhysicsSystem.js"></script>
  <script src="js/systems/CameraSystem.js"></script>
  <script src="js/systems/AuraSystem.js"></script>
  <script src="js/systems/CombatSystem.js"></script>
  <script src="js/systems/InputSystem.js"></script>
  <script src="js/systems/FloatingStatusSystem.js"></script>
  <script src="js/systems/AbilitySystem.js"></script>
  <script src="js/systems/TargetSystem.js"></script> 

  <!-- 7. Main bootstrapping / game loop -->
  <script src="js/main.js"></script>

  <script>
    window.addEventListener("DOMContentLoaded", function () {
      if (window.Game && typeof Game.init === "function") {
        Game.init();
      } else {
        console.error("Game.init() not found. Did all scripts load?");
      }
    });
  </script>
</body>

</html>